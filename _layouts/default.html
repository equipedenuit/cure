<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>{{ page.title | default: site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    /* Rendu proche Tumblr */
   body {
  font-family: "Times New Roman", serif;
  font-size: 0.88em;   /* comme sur Tumblr */
  max-width: 540px;    /* largeur colonne Tumblr */
  margin: 0 auto;
  padding: 2rem 1rem;
  line-height: 1.5;
  color: #111;
  background: #fff;
}

    h1{
      font-size: 2.2rem;
      font-weight: 700;
      text-align: center;
      margin: 0 0 .25rem 0;
      letter-spacing: .2px;
    }

    .subtitle{
      text-align: center;
      font-style: italic;
      opacity: .8;
      margin: 0 0 1rem 0;
    }

   a {
  color: #0000EE;       /* bleu HTML classique */
  text-decoration: underline;
}
a:visited {
  color: #551A8B;       /* violet standard pour les liens visités */
}
  .pager{display:flex;justify-content:space-between;gap:1rem;margin:2rem 0}
  .pager .prev,.pager .next{color:#0000EE;text-decoration:underline}

form[name="newsletter"] input[type="email"]{ border:1px solid #ccc; }
form[name="newsletter"] button{ border:1px solid #000; background:#fff; cursor:pointer; }
form[name="newsletter"] button:hover{ background:#f5f5f5; }

    article{ margin: 0 0 3rem 0; }
    article h2{ font-size: 1.25rem; margin: .25rem 0; }
    .meta{ font-size: .9rem; color: #444; margin-bottom: .75rem; }

    hr{ border: 0; border-top: 1px solid #ddd; margin: 2rem 0; }

  @media screen {
    .email-preview { display: none; }
  }

    /* Embeds responsives (YouTube, Mixcloud…) */
    iframe{
      width: 100%;
      max-width: 100%;
      aspect-ratio: 16 / 9;  /* écrase la hauteur fixe */
      height: auto;
      display: block;
      margin: 0 auto;
    }

    img, video{ max-width: 100%; height: auto; display: block; margin: 0 auto; }
  </style>
</head>
<body>
<h1>{{ site.title }}</h1>
{% if site.description %}<div class="subtitle">{{ site.description }}</div>{% endif %}

<!-- Newsletter form -->
<form name="newsletter"
      method="POST"
      data-netlify="true"
      netlify-honeypot="bot-field"
      onsubmit="newsletterSubmit(event)"
      style="margin:1rem 0 2rem;text-align:center;">
  <input type="hidden" name="form-name" value="newsletter">
  <p style="display:none;"><label>Ne pas remplir : <input name="bot-field"></label></p>

  <label for="nl-email" style="display:block;margin-bottom:.5rem;">Recevoir les nouveaux posts par email</label>
  <input id="nl-email" name="email" type="email" required
         style="font:.88em 'Times New Roman',serif;padding:.4rem .6rem;width:75%;max-width:360px;">
  <button type="submit" style="font:.88em 'Times New Roman',serif;padding:.45rem .8rem;margin-left:.5rem;">
    S’abonner
  </button>
</form>

<script>
function encode(data) {
  return Object.keys(data).map(
    (k) => encodeURIComponent(k) + "=" + encodeURIComponent(data[k])
  ).join("&");
}

async function newsletterSubmit(e) {
  e.preventDefault();
  const form = e.target;
  const fd = new FormData(form);

  // Construire un body x-www-form-urlencoded comme Netlify le recommande
  const body = encode(Object.fromEntries(fd.entries()));

  try {
    const res = await fetch("https://curerecs.net/", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body
    });
    if (!res.ok) throw new Error("Submit failed: " + res.status);
    // Redirection en GET vers la page de confirmation
    window.location.href = "https://curerecs.net/confirmation/";
  } catch (err) {
    alert("Erreur lors de l’inscription : " + err.message);
  }
}
</script>



  {{ content }}
  <!-- Form fantôme pour Netlify (détection au build) -->
<form name="newsletter" netlify netlify-honeypot="bot-field" hidden>
  <input type="email" name="email">
</form>

</body>
</html>
